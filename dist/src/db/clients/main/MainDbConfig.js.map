{"version":3,"file":"MainDbConfig.js","sourceRoot":"","sources":["../../../../../src/db/clients/main/MainDbConfig.ts"],"names":[],"mappings":";;;AACA,+BAA4B;AAC5B,gDAAmD;AAEnD,MAAa,YAAY;IAChB,YAAY,CAAC,IAAc;QAChC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAA,mBAAW,EAAC,CAAC,CAAC,CAAC,CAAC;QACpC,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,OAAO;QACZ,OAAO,IAAA,mBAAW,EAAC,MAAM,CAAC,CAAC;IAC7B,CAAC;IAEM,SAAS;QACd,OAAO;YACL,IAAI,EAAE,SAAS;YACf,IAAI,EAAE,UAAU;YAChB,IAAI,EAAE,IAAA,mBAAW,EAAC,eAAe,CAAC;YAClC,IAAI,EAAE,QAAQ,CAAC,IAAA,mBAAW,EAAC,eAAe,CAAC,CAAC;YAC5C,QAAQ,EAAE,IAAA,mBAAW,EAAC,eAAe,CAAC;YACtC,QAAQ,EAAE,IAAA,mBAAW,EAAC,mBAAmB,CAAC;YAC1C,QAAQ,EAAE,IAAA,mBAAW,EAAC,mBAAmB,CAAC;YAC1C,QAAQ,EAAE,CAAC,IAAA,WAAI,EAAC,SAAS,EAAE,UAAU,EAAE,cAAc,CAAC,CAAC;YACvD,WAAW,EAAE,KAAK;YAClB,GAAG,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE;SAClC,CAAC;IACJ,CAAC;CACF;AAxBD,oCAwBC","sourcesContent":["import { ConnectionOptions } from \"typeorm\";\nimport { join } from \"path\";\nimport { getEnvValue } from \"../../../utils/utils\";\n\nexport class MainDbConfig {\n  public ensureValues(keys: string[]) {\n    keys.forEach((k) => getEnvValue(k));\n    return this;\n  }\n\n  public getPort() {\n    return getEnvValue(\"PORT\");\n  }\n\n  public getConfig(): ConnectionOptions {\n    return {\n      name: \"default\",\n      type: \"postgres\",\n      host: getEnvValue(\"POSTGRES_HOST\"),\n      port: parseInt(getEnvValue(\"POSTGRES_PORT\")),\n      username: getEnvValue(\"POSTGRES_USER\"),\n      password: getEnvValue(\"POSTGRES_PASSWORD\"),\n      database: getEnvValue(\"POSTGRES_DATABASE\"),\n      entities: [join(__dirname, \"entities\", \"**/*.{ts,js}\")],\n      synchronize: false,\n      ssl: { ca: process.env.SSL_CERT },\n    };\n  }\n}\n"]}